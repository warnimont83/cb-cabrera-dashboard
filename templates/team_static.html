<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <link rel="stylesheet" href="../../../css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="../../../index.html" class="logo">Basketball Stats</a>
            <div class="nav-links">
                <a href="../../../index.html">Teams</a>
            </div>
        </div>
    </nav>

    <main class="container">
        <div class="header">
            <a href="../../../index.html" class="back-link">&larr; Back to teams</a>
            <h1>{{ team_info.name }}</h1>
            <p>{{ team_info.club }} - {{ team_info.category }}</p>
            <p style="color: #7f8c8d; font-size: 0.9rem;">Last updated: {{ generated_at }}</p>
        </div>

        <div class="stats-summary">
            <div class="stat-card">
                <h3>{{ match_count }}</h3>
                <p>Matches Played</p>
            </div>
            <div class="stat-card">
                <h3>{{ players|length }}</h3>
                <p>Players</p>
            </div>
            <div class="stat-card">
                <h3>{{ players|sum(attribute='total_points') }}</h3>
                <p>Total Points</p>
            </div>
        </div>

        <div class="table-container">
            <h2>Player Statistics</h2>
            <table class="stats-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Player</th>
                        <th>Games</th>
                        <th>Total Pts</th>
                        <th>Avg Pts</th>
                        <th>Avg Min</th>
                        <th>Avg Fouls</th>
                        <th>Avg Rating</th>
                        <th>FG%</th>
                    </tr>
                </thead>
                <tbody>
                    {% for player in players %}
                    <tr>
                        <td>{{ player.dorsal }}</td>
                        <td><strong>{{ player.name }}</strong></td>
                        <td>{{ player.games }}</td>
                        <td>{{ player.total_points }}</td>
                        <td>{{ player.avg_points }}</td>
                        <td>{{ player.avg_minutes }}</td>
                        <td>{{ player.avg_fouls }}</td>
                        <td>{{ player.avg_valoration }}</td>
                        <td>
                            {% set total_attempted = player.total_2p_attempted + player.total_3p_attempted %}
                            {% set total_successful = player.total_2p_successful + player.total_3p_successful %}
                            {% if total_attempted > 0 %}
                                {{ "%.1f"|format((total_successful / total_attempted * 100)) }}%
                            {% else %}
                                0.0%
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 Basketball Statistics Dashboard | Generated on {{ generated_at }}</p>
        </div>
    </footer>
</body>
</html>
